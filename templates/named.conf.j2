options {
  listen-on port 53 { 0.0.0.0; };
  directory	"{{ zonesdir }}";
  allow-query { any; };
  recursion no;
	default-key "rndc-key";
	default-server 127.0.0.1;
	default-port 953;
};

include "{{ confdir }}/rndc.conf";

controls {
  inet 127.0.0.1 port 953
  allow { 127.0.0.1; } keys { "rndc-key"; };
};

{% if caching_dns is defined %}
zone "." {
  type hint;
  file "/etc/bind/named.root";
};
{% endif %}

{% for zone in zones %}
zone "{{ zone.name }}" {
  type master;
  file "{{ zonesdir }}/{{ zone.name }}.conf";
};
{% endfor %}
